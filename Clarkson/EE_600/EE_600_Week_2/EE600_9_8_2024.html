<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Glen Sanabria">
<meta name="dcterms.date" content="2024-09-08">

<title>EE600 Notes – University Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">University Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../Clarkson/clarkson_university.html"> 
<span class="menu-text">Clarkson University Notes</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#week-2-introduction-to-solar-energy" id="toc-week-2-introduction-to-solar-energy" class="nav-link active" data-scroll-target="#week-2-introduction-to-solar-energy"><span class="header-section-number">1</span> Week 2: Introduction to Solar Energy</a>
  <ul class="collapse">
  <li><a href="#lecture-introduction-to-solar-energy" id="toc-lecture-introduction-to-solar-energy" class="nav-link" data-scroll-target="#lecture-introduction-to-solar-energy"><span class="header-section-number">1.1</span> Lecture: Introduction to Solar Energy</a>
  <ul class="collapse">
  <li><a href="#the-footprint-of-energy-sources" id="toc-the-footprint-of-energy-sources" class="nav-link" data-scroll-target="#the-footprint-of-energy-sources"><span class="header-section-number">1.1.1</span> The Footprint of Energy Sources</a></li>
  <li><a href="#main-characteristics-of-solar-energy" id="toc-main-characteristics-of-solar-energy" class="nav-link" data-scroll-target="#main-characteristics-of-solar-energy"><span class="header-section-number">1.1.2</span> Main Characteristics of solar Energy</a></li>
  <li><a href="#solar-energy" id="toc-solar-energy" class="nav-link" data-scroll-target="#solar-energy"><span class="header-section-number">1.1.3</span> Solar Energy</a></li>
  <li><a href="#spectrum-of-the-sun" id="toc-spectrum-of-the-sun" class="nav-link" data-scroll-target="#spectrum-of-the-sun"><span class="header-section-number">1.1.4</span> Spectrum of the Sun</a></li>
  <li><a href="#solar-radiation-definitions" id="toc-solar-radiation-definitions" class="nav-link" data-scroll-target="#solar-radiation-definitions"><span class="header-section-number">1.1.5</span> Solar Radiation Definitions</a></li>
  <li><a href="#annual-motion-of-the-earth-about-the-sun" id="toc-annual-motion-of-the-earth-about-the-sun" class="nav-link" data-scroll-target="#annual-motion-of-the-earth-about-the-sun"><span class="header-section-number">1.1.6</span> Annual Motion of the Earth about the Sun</a></li>
  <li><a href="#solar-arrays-tilt-angle" id="toc-solar-arrays-tilt-angle" class="nav-link" data-scroll-target="#solar-arrays-tilt-angle"><span class="header-section-number">1.1.7</span> Solar Arrays Tilt Angle</a></li>
  <li><a href="#concentrated-solar-and-photovoltaics" id="toc-concentrated-solar-and-photovoltaics" class="nav-link" data-scroll-target="#concentrated-solar-and-photovoltaics"><span class="header-section-number">1.1.8</span> Concentrated Solar and Photovoltaics</a></li>
  <li><a href="#approache-to-csp" id="toc-approache-to-csp" class="nav-link" data-scroll-target="#approache-to-csp"><span class="header-section-number">1.1.9</span> Approache to CSP</a></li>
  <li><a href="#power-tower-with-storage" id="toc-power-tower-with-storage" class="nav-link" data-scroll-target="#power-tower-with-storage"><span class="header-section-number">1.1.10</span> Power Tower with Storage</a></li>
  <li><a href="#cps-system-efficiency" id="toc-cps-system-efficiency" class="nav-link" data-scroll-target="#cps-system-efficiency"><span class="header-section-number">1.1.11</span> CPS System Efficiency</a></li>
  <li><a href="#pv-arrays" id="toc-pv-arrays" class="nav-link" data-scroll-target="#pv-arrays"><span class="header-section-number">1.1.12</span> PV Arrays</a></li>
  <li><a href="#technology-drives-cost-down" id="toc-technology-drives-cost-down" class="nav-link" data-scroll-target="#technology-drives-cost-down"><span class="header-section-number">1.1.13</span> Technology Drives Cost Down</a></li>
  <li><a href="#solar-glass-could-convert-the-windows-of-every-building-into-power-generating-panels" id="toc-solar-glass-could-convert-the-windows-of-every-building-into-power-generating-panels" class="nav-link" data-scroll-target="#solar-glass-could-convert-the-windows-of-every-building-into-power-generating-panels"><span class="header-section-number">1.1.14</span> Solar Glass Could Convert the Windows of Every Building Into Power-Generating Panels</a></li>
  <li><a href="#pv-cell-operation" id="toc-pv-cell-operation" class="nav-link" data-scroll-target="#pv-cell-operation"><span class="header-section-number">1.1.15</span> PV Cell Operation</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#readings" id="toc-readings" class="nav-link" data-scroll-target="#readings"><span class="header-section-number">2</span> Readings</a>
  <ul class="collapse">
  <li><a href="#solar-integration-dsitributed-energy-resources-and-microgrids" id="toc-solar-integration-dsitributed-energy-resources-and-microgrids" class="nav-link" data-scroll-target="#solar-integration-dsitributed-energy-resources-and-microgrids"><span class="header-section-number">2.1</span> Solar Integration: Dsitributed Energy Resources and Microgrids</a></li>
  <li><a href="#confronting-the-duck-curve-doe" id="toc-confronting-the-duck-curve-doe" class="nav-link" data-scroll-target="#confronting-the-duck-curve-doe"><span class="header-section-number">2.2</span> Confronting the Duck Curve (DOE)</a></li>
  <li><a href="#the-potential-role-of-concentrating-solar-power-within-the-context-of-does-2030-solar-cost-targets-nrel-2019" id="toc-the-potential-role-of-concentrating-solar-power-within-the-context-of-does-2030-solar-cost-targets-nrel-2019" class="nav-link" data-scroll-target="#the-potential-role-of-concentrating-solar-power-within-the-context-of-does-2030-solar-cost-targets-nrel-2019"><span class="header-section-number">2.3</span> The Potential Role of Concentrating Solar Power within the Context of DOE’s 2030 Solar Cost Targets-NREL 2019</a></li>
  </ul></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources"><span class="header-section-number">3</span> Resources</a>
  <ul class="collapse">
  <li><a href="#pvwatts" id="toc-pvwatts" class="nav-link" data-scroll-target="#pvwatts"><span class="header-section-number">3.1</span> PVWatts</a></li>
  <li><a href="#the-national-solar-radiation-database" id="toc-the-national-solar-radiation-database" class="nav-link" data-scroll-target="#the-national-solar-radiation-database"><span class="header-section-number">3.2</span> The National Solar Radiation database</a></li>
  </ul></li>
  <li><a href="#videos" id="toc-videos" class="nav-link" data-scroll-target="#videos"><span class="header-section-number">4</span> Videos</a>
  <ul class="collapse">
  <li><a href="#how-do-solar-cells-work" id="toc-how-do-solar-cells-work" class="nav-link" data-scroll-target="#how-do-solar-cells-work"><span class="header-section-number">4.1</span> How Do Solar Cells Work?</a></li>
  <li><a href="#rethinking-solar-energy" id="toc-rethinking-solar-energy" class="nav-link" data-scroll-target="#rethinking-solar-energy"><span class="header-section-number">4.2</span> Rethinking Solar Energy</a></li>
  <li><a href="#the-concentrated-solar-power" id="toc-the-concentrated-solar-power" class="nav-link" data-scroll-target="#the-concentrated-solar-power"><span class="header-section-number">4.3</span> The Concentrated Solar Power</a></li>
  <li><a href="#lowering-the-cost-of-concentrated-solar" id="toc-lowering-the-cost-of-concentrated-solar" class="nav-link" data-scroll-target="#lowering-the-cost-of-concentrated-solar"><span class="header-section-number">4.4</span> Lowering the Cost of Concentrated Solar</a></li>
  </ul></li>
  <li><a href="#homework" id="toc-homework" class="nav-link" data-scroll-target="#homework"><span class="header-section-number">5</span> Homework</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">EE600 Notes</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Glen Sanabria </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 8, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="week-2-introduction-to-solar-energy" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Week 2: Introduction to Solar Energy</h1>
<section id="lecture-introduction-to-solar-energy" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="lecture-introduction-to-solar-energy"><span class="header-section-number">1.1</span> Lecture: Introduction to Solar Energy</h2>
<ul>
<li><p>Thermal solar and energy storage</p></li>
<li><p>Solar PV</p></li>
<li><p>Over-Generation of Solar Energy: The Duck Curve</p></li>
<li><p>The Role of Energy Storage</p></li>
<li><p>PVWatts Calculator</p></li>
</ul>
<section id="the-footprint-of-energy-sources" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="the-footprint-of-energy-sources"><span class="header-section-number">1.1.1</span> The Footprint of Energy Sources</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Land_Use_by_Electricity_Source_in_AcresperMW_Produced.png" class="img-fluid figure-img" alt="Land Use by Electricity Source in Acres/MW Produced"></p>
<figcaption>Land Use by Electricity Source in Acres/MW Produced (The footprint of energy: land use of US electricity production, Stata.org, 2017)</figcaption>
</figure>
</div>
<p><strong>Note</strong>: The wind turbine “footprint,” which is typically around 0.25 acres per turbine, does not include the 5010 turbine diameters of spacing required between wind turbines.</p>
</section>
<section id="main-characteristics-of-solar-energy" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="main-characteristics-of-solar-energy"><span class="header-section-number">1.1.2</span> Main Characteristics of solar Energy</h3>
<ul>
<li><p>Unlimited</p>
<ul>
<li><p>The earth receives <span class="math inline">\(1.6 * 10^{17} W\)</span>.</p></li>
<li><p>84 minutes of solar radiation falling on earth is equal to the world energy demand for 1 year.</p></li>
</ul></li>
<li><p>Diluted</p>
<ul>
<li>About 200 <span class="math inline">\(W/m^2\)</span> available (at noon) with mainstream PV technologies.</li>
</ul></li>
<li><p>Intermittent</p>
<ul>
<li>requires energy storage and/or grid management (smart grids).</li>
</ul></li>
</ul>
</section>
<section id="solar-energy" class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="solar-energy"><span class="header-section-number">1.1.3</span> Solar Energy</h3>
<section id="stefan-boltzmann-law" class="level4" data-number="1.1.3.1">
<h4 data-number="1.1.3.1" class="anchored" data-anchor-id="stefan-boltzmann-law"><span class="header-section-number">1.1.3.1</span> Stefan-Boltzmann Law</h4>
<p><span class="math display">\[
P = \alpha \sigma AT^4
\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(\sigma = 5.67 * 10^{-8}\)</span> <span class="math inline">\(Wm^{-2}K^{-4}\)</span> is the Stefan-Boltzmann constant</p></li>
<li><p><span class="math inline">\(\alpha\)</span> is the emissivity.</p></li>
<li><p>Emissivity is a dimensionless “fudge factor” which ranges from 0 to 1. A perfect absorber/emitter has <span class="math inline">\(\alpha = 1\)</span>.</p></li>
<li><p>A small increase in temperature leas to a large increase in radiated power.</p></li>
</ul>
</section>
<section id="weins-displacement-law" class="level4" data-number="1.1.3.2">
<h4 data-number="1.1.3.2" class="anchored" data-anchor-id="weins-displacement-law"><span class="header-section-number">1.1.3.2</span> Wein’s Displacement Law</h4>
<p>The intensity of emitted radiation in a wavelength range increases with the increase in temperature for all wavelengths.</p>
<p><span class="math display">\[\lambda_{max} T = b\]</span></p>
<p>Where:</p>
<ul>
<li><p><span class="math inline">\(\lambda_{max}\)</span> is wavelength in meter</p></li>
<li><p><em>T</em>&nbsp;is temperature in Kelvin</p></li>
<li><p><span class="math inline">\(b = 2.9 *10^{-3}mK\)</span> is Wien’s displacement constant.</p></li>
<li></li>
</ul>
</section>
</section>
<section id="spectrum-of-the-sun" class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="spectrum-of-the-sun"><span class="header-section-number">1.1.4</span> Spectrum of the Sun</h3>
<ul>
<li><p>The spectral energy distribution of solar light has a maxima in visible portion.</p></li>
<li><p>The other portion of spectrum produce heat if absorbed.</p></li>
<li><p>Spectrum changes when sunlight passes through the atmosphere due to:</p>
<ul>
<li><p>Reflection of light</p></li>
<li><p>Absorption of light</p></li>
<li><p>Rayleigh scattering</p></li>
<li><p>Scattering of aerosols and dust particles</p></li>
</ul></li>
</ul>
<p>Spectural Composition of Energy (AM 1.5)</p>
<ul>
<li><p>UV(&lt;<span class="math inline">\(4\mu m\)</span>): 5%</p></li>
<li><p>Visible (0.4 - 0.75 <span class="math inline">\(\mu m\)</span>): 40%</p></li>
<li><p>IR (&gt;0.75 <span class="math inline">\(\mu m\)</span>): 55%</p></li>
</ul>
</section>
<section id="solar-radiation-definitions" class="level3" data-number="1.1.5">
<h3 data-number="1.1.5" class="anchored" data-anchor-id="solar-radiation-definitions"><span class="header-section-number">1.1.5</span> Solar Radiation Definitions</h3>
<ul>
<li><p>Irradiance (<span class="math inline">\(W/m^2\)</span>)</p>
<ul>
<li>Measure of the surface power density of sunlight (instantaneous quantity)</li>
</ul></li>
<li><p>Irradiation (<span class="math inline">\(kWh/m^2\)</span>)</p>
<ul>
<li>Measure of the energy density of sunlight or cumulated energy received in a given period (integral of irradiance over time)</li>
</ul></li>
</ul>
</section>
<section id="annual-motion-of-the-earth-about-the-sun" class="level3" data-number="1.1.6">
<h3 data-number="1.1.6" class="anchored" data-anchor-id="annual-motion-of-the-earth-about-the-sun"><span class="header-section-number">1.1.6</span> Annual Motion of the Earth about the Sun</h3>
<p><strong>Insolation</strong> (<strong>in</strong>coming <strong>sol</strong>ar radi<strong>ation</strong>)</p>
<p>Solar radiation received by the earth system, known as insolation, is the main source of energy on Earth.</p>
<p>Variations in insolation lies with the duration of daylight and the angle of the solar rays.</p>
</section>
<section id="solar-arrays-tilt-angle" class="level3" data-number="1.1.7">
<h3 data-number="1.1.7" class="anchored" data-anchor-id="solar-arrays-tilt-angle"><span class="header-section-number">1.1.7</span> Solar Arrays Tilt Angle</h3>
<ul>
<li><p>A common rule of thumb for fixed arrays is to set the tilt angle to the latitude of the system’s location to maximize the system’s total electrical output over the year.</p></li>
<li><p>In additions, you can use a lower tilt angle favor peak production in the summer months when the Sun is high in the sky, or a higher tilt angle increase output during winter months.</p></li>
</ul>
<section id="example" class="level4" data-number="1.1.7.1">
<h4 data-number="1.1.7.1" class="anchored" data-anchor-id="example"><span class="header-section-number">1.1.7.1</span> Example</h4>
<ul>
<li><p>In the Summer, if the Sun is at an angle of <strong>60</strong><span class="math inline">\(^\circ\)</span> to the horizon.</p></li>
<li><p>In the Winter, if the Sun is at an angle of 25<span class="math inline">\(^\circ\)</span> to the horizon.</p></li>
<li><p>Optimum angle in the Summer is 90 - 60 = 30 degrees</p></li>
<li><p>Optimum angle in the Winter is 90 -25 = 65 degrees</p></li>
</ul>
</section>
</section>
<section id="concentrated-solar-and-photovoltaics" class="level3" data-number="1.1.8">
<h3 data-number="1.1.8" class="anchored" data-anchor-id="concentrated-solar-and-photovoltaics"><span class="header-section-number">1.1.8</span> Concentrated Solar and Photovoltaics</h3>
<section id="concentrating-solar-power" class="level4" data-number="1.1.8.1">
<h4 data-number="1.1.8.1" class="anchored" data-anchor-id="concentrating-solar-power"><span class="header-section-number">1.1.8.1</span> Concentrating Solar Power</h4>
<ul>
<li><p>Heat exchanger + steam turbine-gen</p></li>
<li><p>Direct radiation</p></li>
<li><p>Can be used for energy thermal storage</p></li>
<li><p>Steam turbine-gen. and synch. Stability</p></li>
</ul>
</section>
<section id="photovoltaics" class="level4" data-number="1.1.8.2">
<h4 data-number="1.1.8.2" class="anchored" data-anchor-id="photovoltaics"><span class="header-section-number">1.1.8.2</span> Photovoltaics</h4>
<ul>
<li><p>Photoelectric effect - DC</p></li>
<li><p>Direct and diffuse radiation</p></li>
<li><p>CPV</p></li>
</ul>
</section>
</section>
<section id="approache-to-csp" class="level3" data-number="1.1.9">
<h3 data-number="1.1.9" class="anchored" data-anchor-id="approache-to-csp"><span class="header-section-number">1.1.9</span> Approache to CSP</h3>
<ul>
<li><p>CSP systems capture the direct beam component of solar radiation.</p></li>
<li><p><strong>Unlike photovoltaics (PV), they are not able to use radiation that has been diffused by clouds, dust or other factors.</strong></p></li>
<li><p>Best suited to areas with a high percentage of clear sky days, in locations that do not have smog or dust.</p></li>
<li><p>The configurations that are currently used commercially in order of deployment level are:</p>
<ul>
<li><p>Parabolic trough</p></li>
<li><p>central receiver tower</p></li>
<li><p>Paraboloidal dishes</p></li>
<li><p>Fresnel lenses (for CPV)</p></li>
</ul></li>
</ul>
</section>
<section id="power-tower-with-storage" class="level3" data-number="1.1.10">
<h3 data-number="1.1.10" class="anchored" data-anchor-id="power-tower-with-storage"><span class="header-section-number">1.1.10</span> Power Tower with Storage</h3>
<ul>
<li><p>Solar power tower consists of a large field of sun tracking mirrors, called heliostats, which focus solar energy on a receiver atop of a centrally located tower.</p></li>
<li><p>The energy coming ou tot he sun’s rays is concentrated a one point producing temperature of approx. 550<span class="math inline">\(^\circ\)</span>C to 1500<span class="math inline">\(^\circ\)</span>C.</p></li>
<li><p>Tower is used to heat water to produce steam to turn a turbine which produces electricity.</p></li>
<li><p>Molten salt is used to transfer the heat because the heat can be stored and used when the sun is behind the clouds or at night.</p></li>
</ul>
</section>
<section id="cps-system-efficiency" class="level3" data-number="1.1.11">
<h3 data-number="1.1.11" class="anchored" data-anchor-id="cps-system-efficiency"><span class="header-section-number">1.1.11</span> CPS System Efficiency</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="CSP_system_efficiency_plot.png" class="img-fluid figure-img" alt="CSP System Efficiency"></p>
<figcaption>CSP System Efficiency</figcaption>
</figure>
</div>
</section>
<section id="pv-arrays" class="level3" data-number="1.1.12">
<h3 data-number="1.1.12" class="anchored" data-anchor-id="pv-arrays"><span class="header-section-number">1.1.12</span> PV Arrays</h3>
<section id="spectrum-of-the-sun-1" class="level4" data-number="1.1.12.1">
<h4 data-number="1.1.12.1" class="anchored" data-anchor-id="spectrum-of-the-sun-1"><span class="header-section-number">1.1.12.1</span> Spectrum of the Sun</h4>
<ul>
<li><p>Light having energy less than band gap of semiconductor does not produce electron hole pair and hence can not be useful for photovoltage.</p></li>
<li><p>If the used semiconductor has band gap in the energy range of the visible light, infrared portion will not be useful for photovoltaic application.</p></li>
<li><p>The spectral energy distribution of solar light has a maxima in the visible portion.</p></li>
<li><p><strong>This is at around 1.5 eV and hence the semiconductor having band gap near 1.5 eV is preferred for solar cells.</strong></p></li>
<li><p>Since maxima in intensity occurs in the visible portion of sun light, only this portion is useful.</p></li>
<li><p>The other portion of spectrum is not useful. It produces heat if absorbed or attempts are made to get it reflected.</p></li>
<li><p>This is on of the reasons of low efficiency of solar cells as only 46 percent is visible portion.</p></li>
</ul>
</section>
</section>
<section id="technology-drives-cost-down" class="level3" data-number="1.1.13">
<h3 data-number="1.1.13" class="anchored" data-anchor-id="technology-drives-cost-down"><span class="header-section-number">1.1.13</span> Technology Drives Cost Down</h3>
<ul>
<li><p>The DOE’s most recent funding wen toward hardware improvements in non-silicon solar approaches, think films, and next-generation concentrated solar power.</p></li>
<li><p>The DOE target cuts the cost of solar energy by 60% within the next 10 years.</p></li>
<li><p>According to the International Renewable Energy Agency, 82% reduction in solar cost over the last decade came from economies of scale, better technology, and supply chains at largely silicon-based solar plants, not the alternative technologies being funded by the DOE.</p></li>
<li><p>As opposed to the DOE strategy, a JV company (Terabase Energy) is working to drive down utility-scale solar power prices to less than $0.01 per kilowatt-hour by 2025, by using software, automation, and modeling to optimize power-plant operation.</p></li>
</ul>
</section>
<section id="solar-glass-could-convert-the-windows-of-every-building-into-power-generating-panels" class="level3" data-number="1.1.14">
<h3 data-number="1.1.14" class="anchored" data-anchor-id="solar-glass-could-convert-the-windows-of-every-building-into-power-generating-panels"><span class="header-section-number">1.1.14</span> Solar Glass Could Convert the Windows of Every Building Into Power-Generating Panels</h3>
<ul>
<li><p><strong>Ubiquitous Energy</strong> claims that the organic transparent solar coating selectively absorbs and converts ultraviolet and near-infrared light to electricity while letting visible light through.</p></li>
<li><p>Organic solar cells nontoxic, lightweight, and semi-transparent, they also offer the potential of low production costs.</p></li>
<li><p>However, they tend to have low efficiency and thus far, their reliability over time has been less than ideal.</p></li>
<li><p>Organic solar cell with a 9.8 percent power conversion efficiency and now they hope to scale up their technology to a mass production level.</p></li>
</ul>
</section>
<section id="pv-cell-operation" class="level3" data-number="1.1.15">
<h3 data-number="1.1.15" class="anchored" data-anchor-id="pv-cell-operation"><span class="header-section-number">1.1.15</span> PV Cell Operation</h3>
<ul>
<li><p>PV cells consist of p-type and n-type semiconductors forming a p-n junction</p></li>
<li><p>Absorption of photons (light) generates electron-hole pairs leading to light-generated current</p></li>
<li><p>Light generated carriers are separated by the electric field at the p-n junction preventing recombination and enabling current flow through external circuit</p></li>
<li><p>Voltage generated by <em>photovoltaic</em> effect - the light generated carriers result in forward bias of the junction</p></li>
<li><p>Current in the external circuit is the difference of the light-generated current and the forward bias current</p></li>
</ul>
</section>
</section>
</section>
<section id="readings" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Readings</h1>
<section id="solar-integration-dsitributed-energy-resources-and-microgrids" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="solar-integration-dsitributed-energy-resources-and-microgrids"><span class="header-section-number">2.1</span> Solar Integration: Dsitributed Energy Resources and Microgrids</h2>
</section>
<section id="confronting-the-duck-curve-doe" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="confronting-the-duck-curve-doe"><span class="header-section-number">2.2</span> Confronting the Duck Curve (DOE)</h2>
</section>
<section id="the-potential-role-of-concentrating-solar-power-within-the-context-of-does-2030-solar-cost-targets-nrel-2019" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="the-potential-role-of-concentrating-solar-power-within-the-context-of-does-2030-solar-cost-targets-nrel-2019"><span class="header-section-number">2.3</span> The Potential Role of Concentrating Solar Power within the Context of DOE’s 2030 Solar Cost Targets-NREL 2019</h2>
</section>
</section>
<section id="resources" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Resources</h1>
<section id="pvwatts" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="pvwatts"><span class="header-section-number">3.1</span> PVWatts</h2>
</section>
<section id="the-national-solar-radiation-database" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="the-national-solar-radiation-database"><span class="header-section-number">3.2</span> The National Solar Radiation database</h2>
</section>
</section>
<section id="videos" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Videos</h1>
<section id="how-do-solar-cells-work" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="how-do-solar-cells-work"><span class="header-section-number">4.1</span> How Do Solar Cells Work?</h2>
</section>
<section id="rethinking-solar-energy" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="rethinking-solar-energy"><span class="header-section-number">4.2</span> Rethinking Solar Energy</h2>
</section>
<section id="the-concentrated-solar-power" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="the-concentrated-solar-power"><span class="header-section-number">4.3</span> The Concentrated Solar Power</h2>
</section>
<section id="lowering-the-cost-of-concentrated-solar" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="lowering-the-cost-of-concentrated-solar"><span class="header-section-number">4.4</span> Lowering the Cost of Concentrated Solar</h2>
</section>
</section>
<section id="homework" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Homework</h1>
<ol type="A">
<li><p>Use the <strong>PVWatts</strong> calculator to calculate the Solar Radiation in <span class="math inline">\(kWh/m^2/day\)</span> for the month of <strong>December</strong> in <strong>Schenectady, NY</strong> in the following conditions:</p>
<p>Array Type:</p>
<ol type="1">
<li><p>Fixed (roof mount)</p></li>
<li><p>1-axis tracking</p></li>
<li><p>2-axis tracking</p></li>
<li><p>Which of the three array types has the highest <span class="math inline">\(kWh/m^2/day\)</span>?</p></li>
</ol></li>
</ol>
<p><strong>Answer:</strong></p>
<p>The latitude and longitude result from inputting “Schenectady, NY” in the in the “Location” field of the website was Lat: 42.81, Lng: -73.94; with a distance between my location (input) and the center of the site grid cell of 0.2 miles.</p>
<table class="caption-top table">
<caption>PVWatts Calculator Parameters and Results</caption>
<colgroup>
<col style="width: 29%">
<col style="width: 12%">
<col style="width: 29%">
<col style="width: 29%">
</colgroup>
<tbody>
<tr class="odd">
<td>DC System Size (kw)</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="even">
<td>Module Type:</td>
<td style="text-align: center;">Standard</td>
<td style="text-align: center;">Standard</td>
<td style="text-align: center;">Standard</td>
</tr>
<tr class="odd">
<td><strong>Array Type:</strong></td>
<td style="text-align: center;"><strong>Fixed (roof mount)</strong></td>
<td style="text-align: center;"><strong>1-Axis Tracking</strong></td>
<td style="text-align: center;"><strong>2-Axis Tracking</strong></td>
</tr>
<tr class="even">
<td>System Losses (%):</td>
<td style="text-align: center;">14.08</td>
<td style="text-align: center;">14.08</td>
<td style="text-align: center;">14.08</td>
</tr>
<tr class="odd">
<td>Tilt (deg):</td>
<td style="text-align: center;">20</td>
<td style="text-align: center;">20</td>
<td style="text-align: center;">20</td>
</tr>
<tr class="even">
<td>Azimuth (deg):</td>
<td style="text-align: center;">180</td>
<td style="text-align: center;">180</td>
<td style="text-align: center;">180</td>
</tr>
<tr class="odd">
<td>DC to AC Size Ratio:</td>
<td style="text-align: center;">1.2</td>
<td style="text-align: center;">1.2</td>
<td style="text-align: center;">1.2</td>
</tr>
<tr class="even">
<td>Inverter Efficiency (%):</td>
<td style="text-align: center;">96</td>
<td style="text-align: center;">96</td>
<td style="text-align: center;">96</td>
</tr>
<tr class="odd">
<td>Ground Coverage Ratio:</td>
<td style="text-align: center;">0.4</td>
<td style="text-align: center;">0.4</td>
<td style="text-align: center;">0.4</td>
</tr>
<tr class="even">
<td>Albedo:</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;">N/A</td>
</tr>
<tr class="odd">
<td>Bifacial</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">No</td>
</tr>
<tr class="even">
<td>Monthly Irradiance Loss (%): (All months)</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td>Solar Radiation (<span class="math inline">\(kWh/m^2/day\)</span>) for December:</td>
<td style="text-align: center;">2.16</td>
<td style="text-align: center;">1.84</td>
<td style="text-align: center;">3.36</td>
</tr>
<tr class="even">
<td>AC Energy (kWh)</td>
<td style="text-align: center;">220</td>
<td style="text-align: center;">191</td>
<td style="text-align: center;">339</td>
</tr>
</tbody>
</table>
<p>Of the three array types, the 2-axis tracking yield the most Solar Radiation (3.36 <span class="math inline">\(kWh/m^2/day\)</span>). This is the expected response from the calculator as the PV panel angle is adjusted for optimal capture of the Sun throughout the day.</p>
<p>Surprisingly the 1-axis tracking yielded less Solar Radiation (1.84 <span class="math inline">\(kWh/m^2/day\)</span>) than the fixed (roof mount) (2.16 <span class="math inline">\(kWh/m^2/day\)</span>) array type. This may be due to some of the factors that the calculator is considering other than the array type such as array location. The specificity of the array being on the roof for the fixed (roof mount) array type is not explicit for the 1-axis tracking array type. This may lead to a discrepancy in performance if it is assumed that the 1-axis tracking array is placed elsewhere, such as on the ground.</p>
<ol start="2" type="A">
<li>If the average <strong>annual</strong> electricity consumption for a residential utility was <strong>10,000 kWh</strong>. If you design a PV systems using fixed (roof mount) array(s) <strong>from part (A)</strong>, how many arrays will you use to power this residential utility?</li>
</ol>
<p><strong>Answer:</strong> The array system size of PV system that is fixed (roof mount) must be at least a <strong>DC System Size of 8.144 kW</strong> or an <strong>Array area of around 42.86</strong> <span class="math inline">\(m^2\)</span> to yield 10,000 kWh annually with a nominal PV efficiency of 19%.</p>
<ol start="3" type="A">
<li><p>What is the common rule of thumb for setting the tilt angle of a fixed array?</p>
<p>What else can you do to maximize the solar energy captured of a fixed array in the summer months when the Sun is high in the sky, and in the winter months when the Sun is low?</p></li>
</ol>
<p><strong>Answer:</strong> A common rule of thumb for fixed arrays is to set the tilt angle to the latitude of the system’s location to maximize the system’s total electrical output over the year.</p>
<p>In additions, you can use a lower tilt angle favor peak production in the summer months when the Sun is high in the sky, or a higher tilt angle increase output during winter months.</p>
<ul>
<li><p>In the Summer, if the Sun is at an angle of <strong>60</strong><span class="math inline">\(^\circ\)</span> to the horizon.</p></li>
<li><p>In the Winter, if the Sun is at an angle of 25<span class="math inline">\(^\circ\)</span> to the horizon.</p></li>
<li><p>Optimum angle in the Summer is 90 - 60 = 30 degrees</p></li>
<li><p>Optimum angle in the Winter is 90 -25 = 65 degrees</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/Glensana\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>